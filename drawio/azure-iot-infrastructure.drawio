<mxfile host="app.diagrams.net" modified="2026-01-15T12:00:00.000Z" agent="Draw.io" version="22.1.11">
  <diagram name="Azure IoT Infrastructure" id="azure-iot-flow">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Azure IoT Edge Monitoring Infrastructure - Deployment Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="700" height="40" as="geometry" />
        </mxCell>

        <!-- Development Environment Section -->
        <mxCell id="dev-section" value="Development Environment" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="340" height="320" as="geometry" />
        </mxCell>

        <!-- VS Code -->
        <mxCell id="vscode" value="VS Code" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/svg+xml,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MCA4MCI+PHBhdGggZmlsbD0iIzAwNzhjYyIgZD0iTTYwIDBoLTQwdjgwaDQweiIvPjwvc3ZnPg==;fillColor=#0078D4;strokeColor=#0078D4;" vertex="1" parent="dev-section">
          <mxGeometry x="40" y="40" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="vscode-label" value="VS Code IDE&#xa;• Edit config.tf&#xa;• Edit variables.tf&#xa;• Run scripts" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="dev-section">
          <mxGeometry x="110" y="50" width="210" height="60" as="geometry" />
        </mxCell>

        <!-- Config Files -->
        <mxCell id="config-tf" value="config.tf" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#fff2cc;strokeColor=#d6b656;size=10;fontSize=12;fontStyle=1" vertex="1" parent="dev-section">
          <mxGeometry x="40" y="140" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="config-label" value="• Resources&#xa;• Providers&#xa;• IoT Hub routes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="dev-section">
          <mxGeometry x="150" y="145" width="170" height="50" as="geometry" />
        </mxCell>

        <mxCell id="variables-tf" value="variables.tf" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#fff2cc;strokeColor=#d6b656;size=10;fontSize=12;fontStyle=1" vertex="1" parent="dev-section">
          <mxGeometry x="40" y="220" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="var-label" value="• Subscription ID&#xa;• Input variables" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="dev-section">
          <mxGeometry x="150" y="230" width="170" height="40" as="geometry" />
        </mxCell>

        <!-- Deployment Section -->
        <mxCell id="deploy-section" value="Terraform Deployment" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="440" width="340" height="280" as="geometry" />
        </mxCell>

        <!-- Deployment Steps -->
        <mxCell id="tf-init" value="terraform init" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="deploy-section">
          <mxGeometry x="40" y="40" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="init-desc" value="Download providers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="deploy-section">
          <mxGeometry x="170" y="45" width="150" height="30" as="geometry" />
        </mxCell>

        <mxCell id="tf-plan" value="terraform plan" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="deploy-section">
          <mxGeometry x="40" y="100" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="plan-desc" value="Preview changes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="deploy-section">
          <mxGeometry x="170" y="105" width="150" height="30" as="geometry" />
        </mxCell>

        <mxCell id="tf-apply" value="terraform apply" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="deploy-section">
          <mxGeometry x="40" y="160" width="120" height="40" as="geometry" />
        </mxCell>

        <mxCell id="apply-desc" value="Deploy to Azure" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="deploy-section">
          <mxGeometry x="170" y="165" width="150" height="30" as="geometry" />
        </mxCell>

        <mxCell id="workflow" value="deploy-terraform.yml" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1" vertex="1" parent="deploy-section">
          <mxGeometry x="40" y="220" width="140" height="40" as="geometry" />
        </mxCell>

        <mxCell id="workflow-desc" value="GitHub Actions CI/CD" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="deploy-section">
          <mxGeometry x="190" y="225" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Azure Cloud Section -->
        <mxCell id="azure-section" value="Azure Cloud Resources" style="swimlane;whiteSpace=wrap;html=1;fillColor=#cfe2f3;strokeColor=#0066cc;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="440" y="80" width="920" height="640" as="geometry" />
        </mxCell>

        <!-- Resource Group -->
        <mxCell id="rg-container" value="Resource Group: bl-monitoring-rg1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="azure-section">
          <mxGeometry x="40" y="40" width="840" height="560" as="geometry" />
        </mxCell>

        <!-- IoT Hub -->
        <mxCell id="iothub" value="IoT Hub&#xa;bl-iothub-{suffix}&#xa;SKU: S1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0078D4;strokeColor=#003d73;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="azure-section">
          <mxGeometry x="320" y="80" width="200" height="80" as="geometry" />
        </mxCell>

        <mxCell id="iothub-details" value="• 400K msgs/day&#xa;• Device registry&#xa;• Message routing&#xa;• Batch: 60s" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#333333;" vertex="1" parent="azure-section">
          <mxGeometry x="540" y="85" width="120" height="70" as="geometry" />
        </mxCell>

        <!-- Storage Endpoint -->
        <mxCell id="storage-endpoint" value="Endpoint:&#xa;export-storage-endpoint" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b3d9ff;strokeColor=#0066cc;fontSize=10;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="160" y="200" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Event Hub Endpoint -->
        <mxCell id="eh-endpoint" value="Endpoint:&#xa;export-eventhub-endpoint" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b3d9ff;strokeColor=#0066cc;fontSize=10;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="540" y="200" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Storage Route -->
        <mxCell id="storage-route" value="Route:&#xa;export-telemetry-route-storage&#xa;Condition: true" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f2ff;strokeColor=#0066cc;fontSize=9;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="160" y="280" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- Event Hub Route -->
        <mxCell id="eh-route" value="Route:&#xa;export-telemetry-route-eventhub&#xa;Condition: true" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f2ff;strokeColor=#0066cc;fontSize=9;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="540" y="280" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- Storage Account -->
        <mxCell id="storage" value="Storage Account&#xa;blmonitoring{suffix}&#xa;ADLS Gen2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#00A4EF;strokeColor=#005a9e;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="azure-section">
          <mxGeometry x="80" y="380" width="180" height="80" as="geometry" />
        </mxCell>

        <mxCell id="storage-details" value="• Standard LRS&#xa;• TLS 1.2 min&#xa;• System identity&#xa;• HNS enabled" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#333333;" vertex="1" parent="azure-section">
          <mxGeometry x="80" y="470" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- Storage Container -->
        <mxCell id="container" value="Container:&#xa;telemetry&#xa;(private)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#99ccff;strokeColor=#005a9e;fontSize=10;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="110" y="540" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- Event Hub Namespace -->
        <mxCell id="eh-namespace" value="Event Hub Namespace&#xa;bl-eh-namespace-{suffix}&#xa;SKU: Basic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#00BCF2;strokeColor=#005a9e;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="azure-section">
          <mxGeometry x="500" y="380" width="220" height="80" as="geometry" />
        </mxCell>

        <mxCell id="eh-namespace-details" value="• Capacity: 1 TU&#xa;• Basic tier" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#333333;" vertex="1" parent="azure-section">
          <mxGeometry x="500" y="470" width="220" height="30" as="geometry" />
        </mxCell>

        <!-- Event Hub -->
        <mxCell id="eventhub" value="Event Hub&#xa;bl-telemetry-eh-{suffix}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4db8ff;strokeColor=#005a9e;fontSize=11;fontStyle=1" vertex="1" parent="azure-section">
          <mxGeometry x="520" y="510" width="180" height="40" as="geometry" />
        </mxCell>

        <mxCell id="eh-details" value="• Partitions: 2&#xa;• Retention: 1 day&#xa;• Auth: Listen+Send" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#333333;" vertex="1" parent="azure-section">
          <mxGeometry x="520" y="560" width="180" height="40" as="geometry" />
        </mxCell>

        <!-- Data Flow Section -->
        <mxCell id="dataflow-section" value="Data Flow" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff4e6;strokeColor=#d79b00;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="760" width="1320" height="200" as="geometry" />
        </mxCell>

        <!-- IoT Device -->
        <mxCell id="device" value="IoT Device" style="shape=mxgraph.signs.transportation.car_1;html=1;pointerEvents=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalLabelPosition=bottom;verticalAlign=top;fontSize=11;fontStyle=1" vertex="1" parent="dataflow-section">
          <mxGeometry x="60" y="60" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="telemetry" value="Telemetry Data&#xa;{temp, humidity, timestamp}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="dataflow-section">
          <mxGeometry x="180" y="70" width="160" height="50" as="geometry" />
        </mxCell>

        <mxCell id="iothub-flow" value="IoT Hub&#xa;Receives &amp; Routes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0078D4;strokeColor=#003d73;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="dataflow-section">
          <mxGeometry x="400" y="70" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="storage-flow" value="Storage&#xa;AVRO files" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#00A4EF;strokeColor=#005a9e;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="dataflow-section">
          <mxGeometry x="580" y="40" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="eh-flow" value="Event Hub&#xa;Real-time" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#00BCF2;strokeColor=#005a9e;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="dataflow-section">
          <mxGeometry x="580" y="110" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="consumers" value="Data Consumers&#xa;• Analytics&#xa;• Dashboards&#xa;• Alerts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="dataflow-section">
          <mxGeometry x="740" y="60" width="140" height="70" as="geometry" />
        </mxCell>

        <!-- Arrows - Dev to Deploy -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;endArrow=block;endFill=1;" edge="1" parent="1" source="vscode" target="tf-init">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="110" y="420" />
              <mxPoint x="140" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow1-label" value="Edit files" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow1">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint x="15" y="-8" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Deploy steps -->
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;endArrow=block;endFill=1;" edge="1" parent="1" source="tf-init" target="tf-plan">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;endArrow=block;endFill=1;" edge="1" parent="1" source="tf-plan" target="tf-apply">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow - Deploy to Azure -->
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#00AA00;endArrow=block;endFill=1;" edge="1" parent="1" source="tf-apply" target="iothub">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="140" y="750" />
              <mxPoint x="650" y="750" />
              <mxPoint x="650" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow4-label" value="Deploy Resources" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fontColor=#00AA00;" vertex="1" connectable="0" parent="arrow4">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint x="180" y="2" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Arrows - IoT Hub to Endpoints -->
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;endArrow=block;endFill=1;" edge="1" parent="1" source="iothub" target="storage-endpoint">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;endArrow=block;endFill=1;" edge="1" parent="1" source="iothub" target="eh-endpoint">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows - Endpoints to Routes -->
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;endArrow=block;endFill=1;" edge="1" parent="1" source="storage-endpoint" target="storage-route">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;endArrow=block;endFill=1;" edge="1" parent="1" source="eh-endpoint" target="eh-route">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows - Routes to Storage/Event Hub -->
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00A4EF;endArrow=block;endFill=1;" edge="1" parent="1" source="storage-route" target="storage">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00BCF2;endArrow=block;endFill=1;" edge="1" parent="1" source="eh-route" target="eh-namespace">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows - Storage to Container -->
        <mxCell id="arrow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#005a9e;endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="storage" target="container">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows - Namespace to Event Hub -->
        <mxCell id="arrow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#005a9e;endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="eh-namespace" target="eventhub">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows - Data Flow -->
        <mxCell id="arrow13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="device" target="telemetry">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="telemetry" target="iothub-flow">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="iothub-flow" target="storage-flow">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="iothub-flow" target="eh-flow">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="storage-flow" target="consumers">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;" edge="1" parent="1" source="eh-flow" target="consumers">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="Legend" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1180" y="800" width="180" height="160" as="geometry" />
        </mxCell>

        <mxCell id="legend1" value="Development" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="legend-box">
          <mxGeometry x="10" y="30" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend2" value="Deployment" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="legend-box">
          <mxGeometry x="90" y="30" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend3" value="Azure Cloud" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cfe2f3;strokeColor=#0066cc;fontSize=9;" vertex="1" parent="legend-box">
          <mxGeometry x="10" y="60" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend4" value="Data Flow" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff4e6;strokeColor=#d79b00;fontSize=9;" vertex="1" parent="legend-box">
          <mxGeometry x="90" y="60" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend5" value="Config Flow" style="edgeStyle=none;html=1;strokeWidth=2;strokeColor=#666666;endArrow=block;endFill=1;fontSize=9;" edge="1" parent="legend-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="10" y="100" as="sourcePoint" />
            <mxPoint x="60" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend6" value="Data Flow" style="edgeStyle=none;html=1;strokeWidth=2;strokeColor=#d79b00;endArrow=block;endFill=1;fontSize=9;" edge="1" parent="legend-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="10" y="120" as="sourcePoint" />
            <mxPoint x="60" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="legend7" value="Contains" style="edgeStyle=none;html=1;strokeWidth=2;strokeColor=#005a9e;endArrow=block;endFill=1;dashed=1;fontSize=9;" edge="1" parent="legend-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="10" y="140" as="sourcePoint" />
            <mxPoint x="60" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
